(this["webpackJsonpsmall-social-media-feed"]=this["webpackJsonpsmall-social-media-feed"]||[]).push([[0],{1140:function(e,t){},1143:function(e,t,a){"use strict";a.r(t);var n,r=a(0),c=a.n(r),s=a(35),i=a.n(s),o=a(2),l=a(14),u=a(3),m=a(18),d=a(10),f=a.n(d),b=a(20),p=a(22),E=a(24),v=a(67);function h(e){return N.apply(this,arguments)}function N(){return(N=Object(b.a)(f.a.mark((function e(t){var a,n,r,c,s,i,o,l=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=l.length>1&&void 0!==l[1]?l[1]:{},n=a.body,r=Object(v.a)(a,["body"]),c={"Content-Type":"application/json"},s=Object(E.a)(Object(E.a)({method:n?"POST":"GET"},r),{},{headers:Object(E.a)(Object(E.a)({},c),r.headers)}),n&&(s.body=JSON.stringify(n)),e.prev=4,e.next=7,window.fetch(t,s);case 7:return o=e.sent,e.next=10,o.json();case 10:if(i=e.sent,!o.ok){e.next=13;break}return e.abrupt("return",i);case 13:throw new Error(o.statusText);case 16:return e.prev=16,e.t0=e.catch(4),e.abrupt("return",Promise.reject(e.t0.message?e.t0.message:i));case 19:case"end":return e.stop()}}),e,null,[[4,16]])})))).apply(this,arguments)}h.get=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return h(e,Object(E.a)(Object(E.a)({},t),{},{method:"GET"}))},h.post=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return h(e,Object(E.a)(Object(E.a)({},a),{},{body:t}))};var O,j=Object(u.c)({sortComparer:function(e,t){return t.date.localeCompare(e.date)}}),g=j.getInitialState({status:"idle",error:null}),y=Object(u.b)("posts/fetchPosts",Object(b.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/fakeApi/posts",e.next=3,h.get("/fakeApi/posts");case 3:return t=e.sent,e.abrupt("return",t.posts);case 5:case"end":return e.stop()}}),e)})))),x=Object(u.b)("posts/addNewPost",function(){var e=Object(b.a)(f.a.mark((function e(t){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/fakeApi/posts",e.next=3,h.post("/fakeApi/posts",{post:t});case 3:return a=e.sent,e.abrupt("return",a.post);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),w=Object(u.d)({name:"posts",initialState:g,reducers:{postUpdated:function(e,t){var a=t.payload,n=a.title,r=a.user,c=a.content,s=a.id,i=e.entities[s];i&&(i.title=n,i.user=r,i.content=c)},reactionAdded:function(e,t){var a=t.payload,n=a.desc,r=a.postId,c=e.entities[r].reactions;c[n]?c[n]+=1:c[n]=1}},extraReducers:(n={},Object(m.a)(n,y.pending,(function(e,t){e.status="loading"})),Object(m.a)(n,y.fulfilled,(function(e,t){e.status="success",j.upsertMany(e,t.payload)})),Object(m.a)(n,y.rejected,(function(e,t){e.status="failed",e.error=t.error.message})),Object(m.a)(n,x.fulfilled,j.addOne),n)}),k=w.actions,S=(k.postAdded,k.postUpdated),I=k.reactionAdded,A=w.reducer,C=j.getSelectors((function(e){return e.posts})),P=C.selectAll,D=C.selectById,R=C.selectIds,T=Object(p.a)([P,function(e,t){return t}],(function(e,t){return e.filter((function(e){return e.user===t}))})),U=function(e){return e.posts.status},B=Object(u.c)(),F=B.getInitialState(),M=Object(u.b)("users/fetchUsers",Object(b.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/fakeApi/users",e.next=3,h.get("/fakeApi/users");case 3:return t=e.sent,e.abrupt("return",t.users);case 5:case"end":return e.stop()}}),e)})))),W=Object(u.d)({name:"users",initialState:F,reducers:{},extraReducers:Object(m.a)({},M.fulfilled,(function(e,t){B.setAll(e,t.payload)}))}).reducer,q=B.getSelectors((function(e){return e.users})),z=q.selectAll,J=q.selectById,G=a(12),L=Object(u.c)({sortComparer:function(e,t){return t.date.localeCompare(e.date)}}),V=L.getInitialState({status:"idle"}),Y=Object(u.b)("notifications/fetchNotifications",function(){var e=Object(b.a)(f.a.mark((function e(t,a){var n,r,c,s,i,o,l;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.getState,r=X(n()),c=Object(G.a)(r,1),s=c[0],i=s?s.date:"",o="/fakeApi/notifications?since=".concat(i),e.next=7,h.get(o);case 7:return l=e.sent,e.abrupt("return",l.notifications);case 9:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),$=Object(u.d)({name:"notifications",initialState:V,reducers:{allNotificationsRead:function(e,t){Object.values(e.entities).forEach((function(e){return e.read=!0}))}},extraReducers:(O={},Object(m.a)(O,Y.pending,(function(e,t){e.status="pending"})),Object(m.a)(O,Y.fulfilled,(function(e,t){Object.values(e.entities).forEach((function(e){return e.isNew=!e.read})),L.upsertMany(e,t.payload),e.status="success"})),O)}),H=$.actions.allNotificationsRead,K=$.reducer,Q=function(e){return e.notifications.status},X=L.getSelectors((function(e){return e.notifications})).selectAll,Z=Object(u.a)({reducer:{posts:A,users:W,notifications:K}}),_=a(4),ee=a(65),te=Object(ee.a)({logo:{}});var ae=function(){te();var e=Object(o.b)(),t=Object(o.c)(Q),a=Object(r.useState)(!1),n=Object(G.a)(a,2),s=n[0],i=n[1];return c.a.createElement("nav",{className:"navbar is-primary is-fixed-top",role:"navigation","aria-label":"main navigation"},c.a.createElement("div",{className:"navbar-brand"},c.a.createElement(l.b,{to:"/",className:"navbar-item"},"Posts"),c.a.createElement("div",{role:"button",className:"navbar-burger burger ".concat(s?"is-active":""),"aria-label":"menu","aria-expanded":"false","data-target":"navbarBasicExample",onClick:function(){i((function(e){return!e}))}},c.a.createElement("span",{"aria-hidden":"true"}),c.a.createElement("span",{"aria-hidden":"true"}),c.a.createElement("span",{"aria-hidden":"true"}))),c.a.createElement("div",{id:"navbarBasicExample",className:"navbar-menu ".concat(s?"is-active":"")},c.a.createElement("div",{className:"navbar-start"},c.a.createElement(l.b,{to:"/users",className:"navbar-item"},"Users"),c.a.createElement(l.b,{to:"/notifications",className:"navbar-item"},"Notifications")),c.a.createElement("div",{className:"navbar-end"},c.a.createElement("div",{className:"navbar-item"},c.a.createElement("button",{className:"button is-light ".concat("pending"===t&&"is-loading"),disabled:"pending"===t,onClick:function(){return e(Y())}},"Refresh Notifications")))))};var ne=function(){return c.a.createElement("div",{className:"level-item"},c.a.createElement("span",{className:"icon has-text-info is-large"},c.a.createElement("i",{className:"fas fa-spinner fa-pulse fa-3x"})))};var re=c.a.memo((function(e){var t=e.userId,a=Object(o.c)((function(e){return J(e,t)})),n="by ".concat(a.name);return c.a.createElement("em",null,n)})),ce=a(1145),se=a(1144);var ie=function(e){var t=e.date,a=Object(ce.a)(t),n=Object(se.a)(a),r="".concat(n," ago");return c.a.createElement("span",{title:a},r)};var oe=function(e){var t=e.userReactions,a=e.postId,n=Object(o.b)(),r=[["thumbsUp","\ud83d\udc4d"],["hooray","\ud83c\udf89"],["heart","\u2764\ufe0f"],["rocket","\ud83d\ude80"],["eyes","\ud83d\udc40"]].map((function(e){var r=Object(G.a)(e,2),s=r[0],i=r[1],o=t[s]||0,l="".concat(i," ").concat(o);return c.a.createElement("button",{key:s,title:s,className:"button mr-2",onClick:function(){return n(I({desc:s,postId:a}))}},l)}));return c.a.createElement("div",null,r)};var le=function(e){var t=e.postId,a=Object(o.c)((function(e){return D(e,t)})),n=a.title,r=a.content,s=a.id,i=a.user,u=a.date,m=a.reactions;return c.a.createElement("article",{className:"notification"},c.a.createElement("p",{className:"title is-4"},n),c.a.createElement("p",{className:"subtitle is-6"},c.a.createElement(re,{userId:i})," ",c.a.createElement(ie,{date:u})),c.a.createElement("p",{className:"subtitle is-6"},r),c.a.createElement(oe,{userReactions:m,postId:s}),c.a.createElement("div",{className:"buttons mt-4"},c.a.createElement(l.b,{className:"button",to:"/post/".concat(s)},"View Post"),c.a.createElement(l.b,{className:"button",to:"/editPost/".concat(s)},"Edit Post")))};var ue=function(){var e,t=Object(o.b)(),a=Object(o.c)(R),n=Object(o.c)((function(e){return e.posts.status})),s=a.map((function(e){return c.a.createElement(le,{key:e,postId:e})}));return"loading"===n?e=c.a.createElement(ne,null):"success"===n?e=s:"failed"===n&&(e="Failed to load new posts"),Object(r.useEffect)((function(){"idle"===n&&t(y())}),[n,t]),c.a.createElement("section",{className:"section"},c.a.createElement("div",{className:"container"},c.a.createElement("h1",{className:"title"},"Posts"),e))};var me=function(){var e=Object(r.useState)(""),t=Object(G.a)(e,2),a=t[0],n=t[1],s=Object(r.useState)(""),i=Object(G.a)(s,2),l=i[0],m=i[1],d=Object(r.useState)(""),p=Object(G.a)(d,2),E=p[0],v=p[1],h=Object(r.useState)("idle"),N=Object(G.a)(h,2),O=N[0],j=N[1],g=Object(o.b)(),y=Object(o.c)(z),w=[a,l,E].every(Boolean)&&"idle"===O,k=function(){var e=Object(b.a)(f.a.mark((function e(t){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),w){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,j("pending"),e.next=7,g(x({title:a,user:l,content:E}));case 7:r=e.sent,Object(u.f)(r),n(""),m(""),v(""),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(3),console.error("Failed to save new post",e.t0);case 17:return e.prev=17,j("idle"),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[3,14,17,20]])})));return function(t){return e.apply(this,arguments)}}(),S=y.map((function(e){return c.a.createElement("option",{key:e.id,value:e.id},e.name)}));return c.a.createElement("section",{className:"section"},c.a.createElement("div",{className:"container"},c.a.createElement("h1",{className:"title"},"Add New Post"),c.a.createElement("form",{onSubmit:k},c.a.createElement("div",{className:"field"},c.a.createElement("label",{className:"label"},"Post Title:"),c.a.createElement("div",{className:"control"},c.a.createElement("input",{name:"title",className:"input",type:"text",placeholder:"What's on your mind?",value:a,onChange:function(e){return n(e.target.value)}}))),c.a.createElement("div",{className:"field"},c.a.createElement("label",{className:"label"},"Author:"),c.a.createElement("div",{className:"control"},c.a.createElement("div",{className:"select"},c.a.createElement("select",{onChange:function(e){return m(e.target.value)},value:l},c.a.createElement("option",null),S)))),c.a.createElement("div",{className:"field"},c.a.createElement("label",{className:"label"},"Description:"),c.a.createElement("div",{className:"control"},c.a.createElement("textarea",{className:"textarea",rows:"2",value:E,onChange:function(e){return v(e.target.value)}}))),c.a.createElement("div",{className:"field"},c.a.createElement("div",{className:"control"},c.a.createElement("button",{className:"button is-link ".concat("pending"===O&&"is-loading"),title:"".concat(w?"":"Disabled button"),disabled:!w,type:"submit"},"Submit"))))))};var de=function(e){var t=e.match.params.postId,a=Object(o.c)((function(e){return D(e,t)}));return c.a.createElement("section",{className:"hero is-light"},c.a.createElement("div",{className:"hero-body"},c.a.createElement("div",{className:"container"},a?c.a.createElement(c.a.Fragment,null,c.a.createElement("p",{className:"title is-3"},a.title),c.a.createElement("p",{className:"subtitle is-5"},c.a.createElement(re,{userId:a.user})," ",c.a.createElement(ie,{date:a.date})),c.a.createElement("p",{className:"subtitle is-5"},a.content),c.a.createElement(oe,{userReactions:a.reactions,postId:a.id})):c.a.createElement("h1",{className:"title"},"Post Not Found"))))};var fe=function(e){var t=e.match,a=e.history,n=t.params.postId,s=Object(o.c)((function(e){return D(e,n)})),i=Object(o.c)(z),l=Object(r.useState)(s.title),u=Object(G.a)(l,2),m=u[0],d=u[1],f=Object(r.useState)(s.user),b=Object(G.a)(f,2),p=b[0],E=b[1],v=Object(r.useState)(s.content),h=Object(G.a)(v,2),N=h[0],O=h[1],j=Object(o.b)(),g=!m||!p||!N,y=i.map((function(e){return c.a.createElement("option",{key:e.id,value:e.id},e.name)}));return c.a.createElement("section",{className:"section"},c.a.createElement("div",{className:"container"},c.a.createElement("h1",{className:"title"},"Edit Post"),c.a.createElement("form",{onSubmit:function(e){e.preventDefault(),g||(j(S({title:m,user:p,content:N,id:n})),a.push("/"))}},c.a.createElement("div",{className:"field"},c.a.createElement("label",{className:"label"},"Post Title:"),c.a.createElement("div",{className:"control"},c.a.createElement("input",{name:"title",className:"input",type:"text",placeholder:"What's on your mind?",value:m,onChange:function(e){return d(e.target.value)}}))),c.a.createElement("div",{className:"field"},c.a.createElement("label",{className:"label"},"Author:"),c.a.createElement("div",{className:"control"},c.a.createElement("div",{className:"select"},c.a.createElement("select",{onChange:function(e){return E(e.target.value)},value:p},c.a.createElement("option",null),y)))),c.a.createElement("div",{className:"field"},c.a.createElement("label",{className:"label"},"Description:"),c.a.createElement("div",{className:"control"},c.a.createElement("textarea",{className:"textarea",rows:"2",value:N,onChange:function(e){return O(e.target.value)}}))),c.a.createElement("div",{className:"field"},c.a.createElement("div",{className:"control"},c.a.createElement("div",{className:"buttons"},c.a.createElement("button",{className:"button is-link",title:"".concat(g?"Disabled button":""),disabled:g,type:"submit"},"Submit"),c.a.createElement("button",{className:"button is-link",onClick:a.goBack},"Cancel")))))))};var be=function(){var e,t=Object(o.c)(z),a=c.a.createElement("ul",null,t.map((function(e){var t=e.id,a=e.firstName,n=e.lastName,r=e.username;return c.a.createElement("li",{key:t,title:"".concat(a," ").concat(n)},c.a.createElement(l.b,{to:"/users/".concat(t)},r))})));return e=t.length>0?c.a.createElement(c.a.Fragment,null,c.a.createElement("h1",{className:"title"},"Users"),c.a.createElement("h2",{className:"subtitle"},a)):c.a.createElement(ne,null),c.a.createElement("section",{className:"hero"},c.a.createElement("div",{className:"hero-body"},c.a.createElement("div",{className:"container"},e)))};var pe=function(e){var t,a=e.match.params.userId,n=Object(o.b)(),s=Object(o.c)((function(e){return J(e,a)})),i=Object(o.c)((function(e){return T(e,a)})),u=Object(o.c)(U),m=i.map((function(e){var t=e.id,a=e.title;return c.a.createElement("li",{key:t},c.a.createElement(l.b,{to:"/post/".concat(t)},a))}));return t=i.length>0?c.a.createElement(c.a.Fragment,null,c.a.createElement("h1",{className:"title"},s.username),c.a.createElement("ul",null,m)):s?c.a.createElement(ne,null):c.a.createElement("h1",{className:"title"},"User Not Found"),Object(r.useEffect)((function(){"idle"===u&&n(y())}),[u,n]),c.a.createElement("section",{className:"section"},c.a.createElement("div",{className:"container"},t))};var Ee=function(){var e,t=Object(o.b)(),a=Object(o.c)(X),n=Object(o.c)(z),s=a.map((function(e){var t=e.id,a=e.date,r=e.message,s=e.user,i=e.isNew,o=Object(ce.a)(a),l=Object(se.a)(o),u=(n.find((function(e){return e.id===s}))||"Unknown User").username;return c.a.createElement("article",{key:t,className:"notification ".concat(i&&"is-warning")},c.a.createElement("strong",null,u)," ",r,c.a.createElement("div",null,c.a.createElement("em",{title:o},l," ago")))}));return e=a.length>0?s:c.a.createElement("h2",{className:"subtitle"},"You're up to date"),Object(r.useEffect)((function(){t(H())})),c.a.createElement("section",{className:"section"},c.a.createElement("div",{className:"container"},c.a.createElement("h1",{className:"title"},"Notifications"),c.a.createElement("div",{className:"container"},e)))};a(80);var ve=function(){return c.a.createElement("div",{className:"App"},c.a.createElement(ae,null),c.a.createElement(_.c,null,c.a.createElement(_.a,{exact:!0,path:"/",render:function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement(me,null),c.a.createElement(ue,null))}}),c.a.createElement(_.a,{exact:!0,path:"/editPost/:postId",component:fe}),c.a.createElement(_.a,{exact:!0,path:"/post/:postId",component:de}),c.a.createElement(_.a,{exact:!0,path:"/users",component:be}),c.a.createElement(_.a,{exact:!0,path:"/users/:userId",component:pe}),c.a.createElement(_.a,{exact:!0,path:"/notifications",component:Ee})))};a(81),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var he,Ne=a(66),Oe=a(11),je=a(25),ge=a.n(je),ye=a(32),xe=a(47),we=a.n(xe),ke=Oe.c.extend({serializeIds:"always"}),Se=we()(),Ie=localStorage.getItem("randomTimestampSeed");function Ae(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Se()*(t-e+1))+e}Ie?he=new Date(Ie):(Ie=(he=new Date).toISOString(),localStorage.setItem("randomTimestampSeed",Ie)),Se=we()(Ie),Object(ye.setRandom)(Se),ge.a.seed(he.getTime());var Ce=function(e){return e[Ae(0,e.length-1)]},Pe=["poked you","says hi!","is glad we're friends","sent you a gift"];new Oe.d({routes:function(){this.namespace="fakeApi",this.timing=2e3,this.resource("users"),this.resource("posts"),this.resource("comments");var e=this;this.post("/posts",(function(t,a){var n=this.normalizedRequestAttrs();n.date=(new Date).toISOString();var r=t.users.find(n.userId);if(n.user=r,"error"===n.content)throw new Error("Could not save the post!");return e.create("post",n)})),this.get("/posts/:postId/comments",(function(e,t){return e.posts.find(t.params.postId).comments})),this.get("/notifications",(function(e,t){var a,n=Ae(1,5),r=new Date;return t.queryParams.since?a=Object(ce.a)(t.queryParams.since):(a=new Date(r.valueOf())).setMinutes(a.getMinutes()-15),{notifications:Object(Ne.a)(Array(n)).map((function(){var t=Ce(e.db.users),n=Ce(Pe);return{id:Object(u.e)(),date:ge.a.date.between(a,r).toISOString(),message:n,user:t.id,read:!1,isNew:!0}}))}}))},models:{user:Oe.b.extend({posts:Object(Oe.g)()}),post:Oe.b.extend({user:Object(Oe.f)(),comments:Object(Oe.g)()}),comment:Oe.b.extend({post:Object(Oe.f)()}),notification:Oe.b.extend({})},factories:{user:Oe.a.extend({id:function(){return Object(u.e)()},firstName:function(){return ge.a.name.firstName()},lastName:function(){return ge.a.name.lastName()},name:function(){return ge.a.name.findName(this.firstName,this.lastName)},username:function(){return ge.a.internet.userName(this.firstName,this.lastName)},afterCreate:function(e,t){t.createList("post",3,{user:e})}}),post:Oe.a.extend({id:function(){return Object(u.e)()},title:function(){return Object(ye.sentence)()},date:function(){return ge.a.date.recent(7)},content:function(){return Object(ye.article)(1)},reactions:function(){return{thumbsUp:0,hooray:0,heart:0,rocket:0,eyes:0}},afterCreate:function(e,t){},user:Object(Oe.e)()}),comment:Oe.a.extend({id:function(){return Object(u.e)()},date:function(){return ge.a.date.past(2)},text:function(){return Object(ye.paragraph)()},post:Object(Oe.e)()})},serializers:{user:ke,post:ke,comment:ke},seeds:function(e){e.createList("user",3)}}),Z.dispatch(M()),i.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(l.a,null,c.a.createElement(o.a,{store:Z},c.a.createElement(ve,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},68:function(e,t,a){e.exports=a(1143)},81:function(e,t,a){}},[[68,1,2]]]);
//# sourceMappingURL=main.c47618e3.chunk.js.map